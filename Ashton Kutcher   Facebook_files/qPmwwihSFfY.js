/*!CK:4028722288!*//*1408326621,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["raGFc"]); }

__d("EgoAdsObjectSet",["DOM","csx"],function(a,b,c,d,e,f,g,h){function i(){"use strict";this._allEgoUnits=[];this._egoUnits=[];}i.prototype.init=function(k){"use strict";this._allEgoUnits=k;this._egoUnits=[];this._allEgoUnits.forEach(function(l){var m=j(l);if(!m||!m.holdout)this._egoUnits.push(l);},this);};i.prototype.getCount=function(){"use strict";return this._egoUnits.length;};i.prototype.forEach=function(k,l){"use strict";this._egoUnits.forEach(k,l);};i.prototype.getUnit=function(k){"use strict";return this._egoUnits[k];};i.prototype.getHoldoutAdIDsForSpace=function(k,l){"use strict";if(!k||!l)return [];var m=[];for(var n=0;k>0&&n<this._allEgoUnits.length;n++){var o=this._allEgoUnits[n],p=l(o),q=j(o);if(k>=p&&q&&q.holdout)m.push(q.adid);k-=p;}return m;};i.prototype.getHoldoutAdIDsForNumAds=function(k){"use strict";k=Math.min(k,this._allEgoUnits.length);var l=[];for(var m=0;m<k;m++){var n=this._allEgoUnits[m],o=j(n);if(o&&o.holdout)l.push(o.adid);}return l;};function j(k){var l=g.scry(k,"div._4u8")[0],m=l&&l.getAttribute('data-ad');return m&&JSON.parse(m)||undefined;}e.exports=i;},null);
__d("rayInterceptsBox",["invariant"],function(a,b,c,d,e,f,g){function h(j,k){var l=Object.keys(j);k.forEach(function(m){g(l.indexOf(m)!==-1);g(typeof j[m]==='number');});}var i={check:function(j,k){h(j,['minX','maxX','minY','maxY']);h(k,['x','y','dx','dy']);g(j.maxX>j.minX&&j.maxY>j.minY);if(k.dx===0&&k.dy===0)return false;if(k.x>=j.minX&&k.x<=j.maxX&&k.y>=j.minY&&k.y<=j.maxY)return true;var l=(j.minX-k.x)/k.dx,m=(j.maxX-k.x)/k.dx,n=(j.minY-k.y)/k.dy,o=(j.maxY-k.y)/k.dy,p=Math.max(Math.min(l,m),Math.min(n,o)),q=Math.min(Math.max(l,m),Math.max(n,o));if(p<0)return false;if(p>q)return false;return true;}};e.exports=i;},null);
__d("AdsMouseStateStore",["Arbiter","DOM","Event","Vector","$","copyProperties","invariant","keyMirror","rayInterceptsBox","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";var q=30,r=500,s=n({STATIONARY:null,INTENT:null,HOVER:null,NO_INTENT:null}),t,u,v,w,x;function y(){t=s.STATIONARY;u=0;v=0;w=Date.now();x='pagelet_ego_pane';}y();function z(event){try{return {x:event.clientX||event.x,y:event.clientY||event.y};}catch(ba){var ca=Math.random()*1000;return {x:ca,y:ca};}}var aa=l(new g(),{getState:function(){return t;},updateRhcID:function(ba){m(k(ba));x=ba;},getRhcID:function(){return x;},onPageTransition:function(event){y();},onMouseMove:function(event){this.calculateState(z(event));},__updateMousePos:function(ba){u=ba.x;v=ba.y;},isRhcPresent:function(){if(!h.scry(document.body,'#'+x).length)return false;var ba=this.getRhcDimensions();return (ba.y>0&&ba.x>0);},getRhc:function(){return k(x);},getRhcPosition:function(){return j.getElementPosition(this.getRhc());},getRhcScreenPos:function(){var ba=j.getScrollPosition(),ca=this.getRhcPosition();return {x:ca.x-ba.x,y:ca.y-ba.y};},getRhcDimensions:function(){return j.getElementDimensions(this.getRhc());},getRhcBoundingBox:function(){var ba=this.getRhcDimensions(),ca=this.getRhcScreenPos();return {minX:ca.x,maxX:ca.x+ba.x,minY:ca.y,maxY:ca.y+ba.y};},isPosContainedInRhc:function(ba){var ca=this.getRhcBoundingBox();return (ba.x>=ca.minX&&ba.x<=ca.maxX&&ba.y>=ca.minY&&ba.y<=ca.maxY);},hasMovedMinDistance:function(ba){var ca=ba.x-u,da=ba.y-v;return (ca*ca+da*da)>=q*q;},tooSoon:function(){return Date.now()-w<r;},_updateTime:function(){w=Date.now();},calculateState:function(ba){if(this.tooSoon())return;this._updateTime();if(!this.isRhcPresent())return;if(this.isPosContainedInRhc(ba)){this.transitionToState(s.HOVER);this.__updateMousePos(ba);this.scheduleCheckup();return;}else if(!this.hasMovedMinDistance(ba)){this.transitionToState(s.STATIONARY);return;}var ca=(this.isMovingTowardsRhc(ba))?s.INTENT:s.NO_INTENT;this.transitionToState(ca);this.__updateMousePos(ba);this.scheduleCheckup();},isMovingTowardsRhc:function(ba){var ca={x:u,y:v};if(this.isPosContainedInRhc(ca))return true;var da=this.getRhcBoundingBox(),ea={x:u,y:v,dx:ba.x-u,dy:ba.y-v};return o.check(da,ea);},scheduleCheckup:function(){var ba={x:u,y:v};setTimeout(function(){this.calculateState(ba);}.bind(this),r*1.5);},transitionToState:function(ba){if(ba===t)return;t=ba;aa.inform('change');}});i.listen(document,'mousemove',p(aa.onMouseMove.bind(aa),r));g.subscribe('page_transition',aa.onPageTransition);aa.STATES=s;aa.MIN_MOVE_DISTANCE=q;aa.THROTTLE_TIME=r;e.exports=aa;},null);
__d("PopoverMenuOverlappingBorder",["CSS","DOM","Style","copyProperties","cx","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(n){"use strict";this._popoverMenu=n;this._popover=n.getPopover();this._triggerElem=n.getTriggerElem();}m.prototype.enable=function(){"use strict";this._setMenuSubscription=this._popoverMenu.subscribe('setMenu',l(this._onSetMenu,this));};m.prototype.disable=function(){"use strict";this._popoverMenu.unsubscribe(this._setMenuSubscription);this._setMenuSubscription=null;this._removeBorderSubscriptions();this._removeShortBorder();};m.prototype._onSetMenu=function(){"use strict";this._removeBorderSubscriptions();this._menu=this._popoverMenu.getMenu();this._renderShortBorder(this._menu.getRoot());this._showSubscription=this._popover.subscribe('show',l(this._updateBorder,this));var n=this._updateBorder.bind(this);this._menuSubscription=this._menu.subscribe(['change','resize'],function(){setTimeout(n,0);});this._updateBorder();};m.prototype._updateBorder=function(){"use strict";var n=this._menu.getRoot(),o=this._triggerElem.offsetWidth,p=Math.max(n.offsetWidth-o,0);i.set(this._shortBorder,'width',p+'px');};m.prototype._renderShortBorder=function(n){"use strict";this._shortBorder=h.create('div',{className:"_54hx"});h.appendContent(n,this._shortBorder);g.addClass(n,"_54hy");};m.prototype._removeShortBorder=function(){"use strict";if(this._shortBorder){h.remove(this._shortBorder);this._shortBorder=null;g.removeClass(this._popoverMenu.getMenu().getRoot(),"_54hy");}};m.prototype._removeBorderSubscriptions=function(){"use strict";if(this._showSubscription){this._popover.unsubscribe(this._showSubscription);this._showSubscription=null;}if(this._menuSubscription){this._menu.unsubscribe(this._menuSubscription);this._menuSubscription=null;}};j(m.prototype,{_shortBorder:null,_setMenuSubscription:null,_showSubscription:null,_menuSubscription:null});e.exports=m;},null);
__d("TimelineSideAds",["AdsMouseStateStore","Animation","Arbiter","CSS","DOM","EgoAdsObjectSet","Event","StickyController","TimelineAdsConfig","TimelineConstants","TimelineController","UIPagelet","URI","Vector","csx","cx","debounce","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y=75,z='data-height',aa=g.STATES,ba=30000,ca=0,da=false,ea,fa,ga,ha,ia,ja,ka=new l(),la,ma,na=false,oa,pa=Infinity,qa=false,ra=5,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb=false,gb=[],hb;function ib(hc,ic,jc){var kc=0;if(ic)kc+=ic.getHeight();if(!nb()&&!kc)return;hc-=kc;var lc=0;for(var mc=0;mc<jc;mc++)lc+=wb(mc);if(ic)if(hc<lc){hc+=ic.fold(lc-hc);}else if(hc>lc)hc-=ic.unfold(hc-lc);return hc;}function jb(){var hc=fa.cloneNode(true);hc.id='';var ic=new l();ic.init(k.scry(hc,'div.ego_unit'));var jc=true;ic.forEach(function(kc){if(jc){jc=false;}else k.remove(kc);});j.addClass(hc,'fixed_elem');return hc;}function kb(){ja=undefined;if(!q.pageHasScrubber(la)){ob(ra);rb();}else if(xa){pb(fa,false);var hc=ya;ya&&k.remove(ya);ya=jb();if(hc)cc();ob(q.sidebarInitialized()&&na?va:ua);rb();if(!oa){var ic=q.getCurrentScrubber();if(ic)bc(ic.getRoot(),ic.getOffset());}oa&&oa.start();}else gc.adjustAdsToFit();}function lb(){if(ya){k.remove(ya);ya=null;}if(oa){oa.stop();oa=null;}if(nb()){j.conditionClass(fa,'fixed_elem',!xa);j.conditionClass(fa,"_22s",!q.pageHasScrubber(la));}else j.conditionClass(fa,'fixed_elem',!xa&&q.pageHasScrubber(la));}function mb(hc){var ic=t.getViewportDimensions().y,jc=q.getCurrentScrubber(),kc=jc?jc.getOffset():p.SCRUBBER_DEFAULT_OFFSET,lc=ic-kc-y;if(jc||nb())return ib(lc,jc,hc);}function nb(){return q.fixedAds();}function ob(hc){ia=Math.min(hc,ka.getCount());ka.forEach(function(ic,jc){pb(ic,jc>=ia);});pb(fa,ia===0);}function pb(hc,ic){j.conditionClass(hc,"_22r",ic);hc.setAttribute('aria-hidden',ic?'true':'false');}function qb(hc){var ic=k.find(ka.getUnit(hc),"div._4u8"),jc=ic.getAttribute('data-ad');return JSON.parse(jc).adid;}function rb(){tb();sb();}function sb(){var hc;if(ja!==undefined){hc=ka.getHoldoutAdIDsForSpace(ja,xb);}else hc=ka.getHoldoutAdIDsForNumAds(ia);if(hc)hc.forEach(ub);}function tb(){if(!za)return;for(var hc=ia-1;hc>=0;--hc){if(oa&&oa.isFixed()&&((hc!==0)||(ya&&!j.shown(ya))))continue;var ic=qb(hc);if(!za[ic])return;ub(ic);}}function ub(hc){if(!za[hc])return;var ic=k.create('iframe',{src:s('/ai.php').addQueryData({aed:za[hc]}),width:0,height:0,frameborder:0,scrolling:'no',className:'fbEmuTracking'});ic.setAttribute('aria-hidden','true');k.appendContent(fa,ic);delete za[hc];}function vb(hc){var ic=0;while(hc>0&&ic<ra){hc-=wb(ic);if(hc>=0)ic++;}return ic;}function wb(hc){var ic=ka.getUnit(hc);if(!ic)return 0;return xb(ic);}function xb(hc){if(!hc.getAttribute(z))yb(hc);return parseInt(hc.getAttribute(z),10);}function yb(hc){hc.setAttribute(z,hc.offsetHeight);}function zb(){for(var hc=0;hc<ka.getCount();hc++){var ic=ka.getUnit(hc);if(!ic)continue;yb(ic);}}function ac(){var hc=k.scry(fa,'div.ego_unit');ka.init(hc);var ic=hc.length;if(!ic)return;j.addClass(ka.getUnit(0),'ego_unit_no_top_border');kb();setTimeout(function(){hc.forEach(yb);gc.adjustAdsToFit();pa=Date.now();},0);}function bc(hc,ic){oa=new n(hc,ic,function(jc){if(jc){cc();}else{k.remove(ya);rb();}});if(ya)oa.start();}function cc(){k.insertAfter(fa,ya);dc();}function dc(){j.conditionShow(ya,wb(0)<=mb(1)&&!j.hasClass(document.documentElement,'tinyViewport'));}function ec(){if(ma){var hc=x(ga);k.find(hc,'.ego_column').appendChild(ma);}if(o.fade)(new h(x(ga))).from('opacity',0).to('opacity',1).duration(600).go();}function fc(hc){return !!k.scry(hc,'div.fbEmuHidePoll')[0];}var gc={init:function(hc,ic,jc){if(da)return;ra=jc.max_ads;ea=jc.refresh_delay;ba=jc.refresh_threshold;sa=jc.min_ads;ta=jc.min_ads_wide;ua=jc.min_ads_short;va=jc.min_ads_short_wide;da=true;ha=ic;fa=hc;g.updateRhcID(k.getID(fa));gc.adjustAdsType(q.shouldShowWideAds());ab=i.subscribe(['UFI/CommentAddedActive','UFI/CommentDeletedActive','UFI/LikeActive','Curation/Action','ProfileBrowser/LoadMoreContent','Ads/NewContentDisplayed'],gc.loadAdsIfEnoughTimePassed);bb=i.subscribe('TimelineSideAds/refresh',gc.forceReloadAds);cb=i.subscribe('ProfileQuestionAnswered',gc.forceReloadAdsWithCallback);db=i.subscribe('Ads/displayPoll',gc.displayAdsPoll);eb=i.subscribe('Ads/hidePoll',gc.hideAdsPoll);hb=w(gc.loadAdsIfEnoughTimePassed,ea,this,true);if(jc.mouse_move){gb.push(m.listen(window,'mousemove',hb));gb.push(m.listen(window,'scroll',hb));gb.push(m.listen(window,'resize',hb));gb.push(m.listen(fa,'mouseenter',function(){qa=true;}));gb.push(m.listen(fa,'mouseleave',function(){qa=false;}));}q.register(q.ADS,gc);},setShortMode:function(hc){xa=hc;},start:function(hc){za=hc;wa=null;ac();},updateCurrentKey:function(hc){if(hc==la)return;la=hc;lb();},loadAds:function(hc){if(wa)return;pa=Infinity;wa=r.loadFromEndpoint('WebEgoPane',fa.id,{pid:33,data:[ha,'timeline_'+hc,xa?va:ra,++ca,false]},{crossPage:true,bundle:false,handler:ec});},registerScrubber:function(hc){if(xa)bc(hc.getRoot(),hc.getOffset());!wa&&gc.adjustAdsToFit();},intentShown:function(){if(!o.stateRefresh)return false;switch(g.getState()){case aa.HOVER:case aa.INTENT:default:return true;case aa.NO_INTENT:return false;case aa.STATIONARY:return !o.refreshOnStationary;}},loadAdsIfEnoughTimePassed:function(){if(ba&&(Date.now()-pa>=ba)&&!j.hasClass(document.documentElement,'tinyViewport')&&(!oa||oa.isFixed())&&(!za||!za[qb(0)])&&!gc.intentShown()&&!qa)gc.loadAds(la);gc.adjustAdsToFit();},forceReloadAdsWithCallback:function(hc,ic){ma=ic;ga=k.getID(fa);gc.loadAds(la);},forceReloadAds:function(){gc.loadAds(la);},adjustAdsType:function(hc){if(hc!=na){j.conditionClass(fa,"_22q",!hc);j.conditionClass(fa,"_35q",!hc);ya&&j.conditionClass(ya,"_22q",!hc);ya&&j.conditionClass(ya,"_35q",!hc);na=hc;zb();gc.adjustAdsToFit();var ic=x('rightColContent');if(ic)j.conditionClass(ic,'fbTimelineWideRightCol',hc);}},displayAdsPoll:function(){var hc=-1;for(var ic=0;ic<ka.getCount();ic++){var jc=ka.getUnit(ic);if(!jc)continue;if(hc===-1&&fc(jc))hc=ic;yb(jc);}gc.adjustAdsToFit();if(hc===ia&&hc>0){pb(ka.getUnit(hc-1),true);pb(ka.getUnit(hc),false);}},hideAdsPoll:function(){zb();gc.adjustAdsToFit();},adjustAdsToFit:function(){if(!fa||fb)return;fb=true;var hc;if(xa){hc=na?va:ua;if(oa&&ya){oa.handleScroll();if(oa.isFixed()){j.conditionShow(ya,wb(0)<=mb(1)&&!j.hasClass(document.documentElement,'tinyViewport'));}else ob(hc);rb();}}else{hc=na?ta:sa;var ic=mb(hc);if(typeof ic!=='undefined'){ja=ic;ob(vb(ic));rb();}}fb=false;},reset:function(){oa&&oa.stop();wa&&wa.cancel();ka=new l();na=false;fa=null;oa=null;wa=null;ca=0;xa=null;ya=null;la=null;pa=Infinity;da=false;ab&&i.unsubscribe(ab);ab=null;bb&&i.unsubscribe(bb);bb=null;cb&&i.unsubscribe(cb);db&&i.unsubscribe(db);eb&&i.unsubscribe(eb);cb=null;qa=false;gb.forEach(function(hc){hc.remove();});gb=[];hb&&hb.reset();}};e.exports=a.TimelineSideAds||gc;},null);
__d("legacy:TimelineMainScrubber",["TimelineMainScrubber"],function(a,b,c,d){a.TimelineMainScrubber=b('TimelineMainScrubber');},3);
__d("XMessagingLeaveConversationDialogControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/leave_conversation\/",{__asyncDialog:{type:"Int"}});},null);